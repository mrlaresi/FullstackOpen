{"version":3,"sources":["services/persons.js","components/ErrorNotification.js","components/Filter.js","components/PersonForm.js","components/Person.js","components/Persons.js","App.js","index.js"],"names":["baseURL","axiosHandler","getPersons","axios","get","addPerson","person","post","modifyNumber","personId","number","put","deletePerson","delete","ErrorNotification","message","isError","base","border","padding","backgroundColor","fontStyle","fontSize","styleError","color","borderColor","styleSuccess","style","Filter","filter","handle","value","onChange","PersonForm","submit","name","nameHandle","numberHandle","onSubmit","type","Person","deleteCallback","onClick","Persons","numbers","map","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","setFilter","errorMessage","setError","setErrorState","filteredNumbers","toLowerCase","includes","changeError","state","setTimeout","modifiedPerson","personsService","id","then","response","data","catch","error","useEffect","event","target","preventDefault","found","find","window","confirm","concat","personToDelete","finally","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.abe99d6a.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseURL = \"/api/persons\"\n\nconst getPersons = () => {\n  return axios.get(baseURL)\n}\n\nconst addPerson = (person) => {\n  return axios.post(baseURL, person)\n}\n\nconst modifyNumber = (personId, number) => {\n  return axios.put(`${baseURL}/${personId}`, number)\n}\n\nconst deletePerson = (personId) => {\n  return axios.delete(`${baseURL}/${personId}`)\n}\n\nconst axiosHandler = {\n  getPersons,\n  addPerson,\n  modifyNumber,\n  deletePerson\n}\nexport default axiosHandler","import React from 'react'\n\nconst ErrorNotification = ({message, isError}) => {\n  if (!message) return null\n  const base = {\n    border: 'thick double',\n    padding: '1em',\n    backgroundColor: 'lightgray',\n    fontStyle: 'italic',\n    fontSize: 16\n  }\n  const styleError = { ...base, color: 'red', borderColor: 'red' }\n  const styleSuccess = { ...base, color: 'green', borderColor: 'green' }\n\n  return (\n    <p style={isError ? styleError : styleSuccess}>\n      {message}\n    </p>   \n  )\n}\n\nexport default ErrorNotification","import React from 'react'\n\nconst Filter = ({filter, handle}) => {\n  return (\n    <div>filter shown with \n      <input value={filter} onChange={handle}/>\n    </div>\n  )\n}\n\nexport default Filter","import React from 'react'\n\nconst PersonForm = ({submit, name, nameHandle, number, numberHandle}) => {\n  return (\n    <form onSubmit={submit}>\n      <div>name: <input value={name} onChange={nameHandle}/></div>\n      <div>number: <input value={number} onChange={numberHandle}/></div>\n      <div><button type=\"submit\">add</button></div>\n    </form>\n  )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Person = ({person, deleteCallback}) => {\n    return <p>{person.name} {person.number} <button onClick={() => deleteCallback(person)}>delete</button></p>\n}\n\nexport default Person","import React from 'react'\nimport Person from './Person'\n\nconst Persons = ({numbers, deleteCallback}) => {\n  return (\n    <div>{numbers.map((person) => {\n      return <Person key={person.name} person={person} deleteCallback={deleteCallback}/>\n    })}\n    </div>\n  )\n}\n\nexport default Persons","import React, { useState, useEffect } from 'react'\nimport personsService from './services/persons'\nimport ErrorNotification from './components/ErrorNotification'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filter, setFilter ] = useState('')\n  const [ errorMessage, setError ] = useState('')\n  const [ isError, setErrorState ] = useState(false)\n\n  const filteredNumbers = persons.filter((person) => {\n    return person.name.toLowerCase().includes(filter.toLowerCase())\n  })\n\n  const changeError = (message, state) => {\n    setError(message)\n    setErrorState(state)\n    setTimeout(() => setError(\"\"), 3000)\n  }\n\n  const addName = (event) => {\n    event.preventDefault()\n    \n    // check if person already exists\n    const found = persons.find(person => person.name === newName)\n    if (found) {\n      const confirm = window.confirm(\n        `${newName} is already added to the phonebook,\n         replace the old number with a new one?`\n      )\n      if (confirm) {\n        modifyNumber(found)\n      }\n      return\n    }\n\n    const person = {\n      name: newName,\n      number: newNumber\n    }\n    personsService\n      .addPerson(person)\n      .then(response => {\n        setPersons(persons.concat(response.data))\n        setNewName('')\n        setNewNumber('')\n        changeError(`Added ${person.name}`, false)\n      })\n  }\n\n  const modifyNumber = (person) => {\n    const modifiedPerson = {...person, number: newNumber}\n    personsService\n      .modifyNumber(modifiedPerson.id, modifiedPerson)\n      .then(response => {\n        setPersons(persons.map(person => person.id !== modifiedPerson.id ? person : response.data))\n        changeError(`Phone number of ${response.data.name} was modified`, false)\n      })\n      .catch(error => {\n        changeError(`Information of ${person.name} has already been removed from the server`, true)\n      })\n  }\n  \n  const deleteCallback = (personToDelete) => {\n    const confirm = window.confirm(`Delete ${personToDelete.name}?`)\n    if (!confirm) return\n    personsService\n      .deletePerson(personToDelete.id)\n      .then(() => {\n        changeError(`Number deleted successfully`, false)\n      })\n      .catch(error => {\n        changeError(`Information of ${personToDelete.name} has already been removed from the server`, true)\n      })\n      .finally(() => {\n        setPersons(persons.filter(person => person.id !== personToDelete.id))\n      })\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const filterNumbers = (event) => {\n    setFilter(event.target.value)\n  }\n  \n  //effect hook, empty array == run once\n  useEffect(() => {\n    personsService\n      .getPersons()\n      .then(response => {\n        setPersons(response.data)\n      })\n  }, [])\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <ErrorNotification message={errorMessage} isError={isError}/>\n      <Filter filter={filter} handle={filterNumbers}/>\n      <h3>Add a new</h3>\n      <PersonForm \n        submit={addName} \n        name={newName} \n        nameHandle={handleNameChange} \n        number={newNumber} \n        numberHandle={handleNumberChange}/>\n      <h3>Numbers</h3>\n      <Persons numbers={filteredNumbers} deleteCallback={deleteCallback}/>\n    </div>\n  )\n\n}\n\nexport default App\n","import ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}