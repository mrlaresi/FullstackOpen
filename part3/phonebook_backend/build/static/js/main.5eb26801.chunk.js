(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var r=t(16),c=t.n(r),a=t(3),o=t(4),i=t(1),u=t(5),s=t.n(u),d="/api/persons",b={getPersons:function(){return s.a.get(d)},addPerson:function(e){return s.a.post(d,e)},modifyNumber:function(e,n){return s.a.put("".concat(d,"/").concat(e),n)},deletePerson:function(e){return s.a.delete("".concat(d,"/").concat(e))}},l=t(0),j=function(e){var n=e.message,t=e.isError;if(!n)return null;var r={border:"thick double",padding:"1em",backgroundColor:"lightgray",fontStyle:"italic",fontSize:16},c=Object(a.a)(Object(a.a)({},r),{},{color:"red",borderColor:"red"}),o=Object(a.a)(Object(a.a)({},r),{},{color:"green",borderColor:"green"});return Object(l.jsx)("p",{style:t?c:o,children:n})},f=function(e){var n=e.filter,t=e.handle;return Object(l.jsxs)("div",{children:["filter shown with",Object(l.jsx)("input",{value:n,onChange:t})]})},m=function(e){var n=e.submit,t=e.name,r=e.nameHandle,c=e.number,a=e.numberHandle;return Object(l.jsxs)("form",{onSubmit:n,children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{value:t,onChange:r})]}),Object(l.jsxs)("div",{children:["number: ",Object(l.jsx)("input",{value:c,onChange:a})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var n=e.person,t=e.deleteCallback;return Object(l.jsxs)("p",{children:[n.name," ",n.number," ",Object(l.jsx)("button",{onClick:function(){return t(n)},children:"delete"})]})},O=function(e){var n=e.numbers,t=e.deleteCallback;return Object(l.jsx)("div",{children:n.map((function(e){return Object(l.jsx)(h,{person:e,deleteCallback:t},e.name)}))})},v=function(){var e=Object(i.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(i.useState)(""),u=Object(o.a)(c,2),s=u[0],d=u[1],h=Object(i.useState)(""),v=Object(o.a)(h,2),p=v[0],x=v[1],g=Object(i.useState)(""),w=Object(o.a)(g,2),k=w[0],C=w[1],y=Object(i.useState)(""),S=Object(o.a)(y,2),P=S[0],E=S[1],H=Object(i.useState)(!1),N=Object(o.a)(H,2),I=N[0],A=N[1],D=t.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())})),J=function(e,n){E(e),A(n),setTimeout((function(){return E("")}),3e3)},L=function(e){var n=Object(a.a)(Object(a.a)({},e),{},{number:p});b.modifyNumber(n.id,n).then((function(e){r(t.map((function(t){return t.id!==n.id?t:e.data}))),J("Phone number of ".concat(e.data.name," was modified"),!1)})).catch((function(n){J("Information of ".concat(e.name," has already been removed from the server"),!0)}))};return Object(i.useEffect)((function(){b.getPersons().then((function(e){r(e.data)}))}),[]),Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(j,{message:P,isError:I}),Object(l.jsx)(f,{filter:k,handle:function(e){C(e.target.value)}}),Object(l.jsx)("h3",{children:"Add a new"}),Object(l.jsx)(m,{submit:function(e){e.preventDefault();var n=t.find((function(e){return e.name===s}));if(n){window.confirm("".concat(s," is already added to the phonebook,\n         replace the old number with a new one?"))&&L(n)}else{var c={name:s,number:p};b.addPerson(c).then((function(e){r(t.concat(e.data)),d(""),x(""),J("Added ".concat(c.name),!1)})).catch((function(e){console.log(e.response.data),J(e.response.data.err,!0)}))}},name:s,nameHandle:function(e){d(e.target.value)},number:p,numberHandle:function(e){x(e.target.value)}}),Object(l.jsx)("h3",{children:"Numbers"}),Object(l.jsx)(O,{numbers:D,deleteCallback:function(e){window.confirm("Delete ".concat(e.name,"?"))&&b.deletePerson(e.id).then((function(){J("Number deleted successfully",!1)})).catch((function(n){J("Information of ".concat(e.name," has already been removed from the server"),!0)})).finally((function(){r(t.filter((function(n){return n.id!==e.id})))}))}})]})};c.a.render(Object(l.jsx)(v,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.5eb26801.chunk.js.map